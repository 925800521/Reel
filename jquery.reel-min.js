/*
 Copyright (c) 2009-2013 Petr Vostrel (http://petr.vostrel.cz/)
 Licensed under the MIT License (LICENSE.txt).

 jQuery Reel
 http://reel360.org
 Version: 1.3-devel
 Updated: 2013-09-02

 Requires jQuery 1.5 or higher
*/
(function(k){var I=typeof define=="function"&&define.amd&&(define(["jquery"],k)||true),V=!I&&typeof module=="object"&&typeof module.exports=="object"&&(module.exports=k);!I&&!V&&k()})(function(){return jQuery.reel||function(k,I,V,u){function wc(f){return n.instances.push(f[0])&&f}function xc(f){return(n.instances=n.instances.not(Ca(f.attr(ja))))&&f}function Y(f){return n.instances.first().data(f)}function yc(f){return"data:image/gif;base64,R0lGODlh"+f}function W(f){return"<"+f+"/>"}function y(f){return"."+
(f||"")}function Ua(f){return f.replace(Da,n.cdn)}function Ea(f){return"url('"+tb(f)+"')"}function Wb(f,j){return typeof j==ub?j[f]:j}function Fa(f,j,m){return vb(f,Ga(j,m))}function Ha(f,j){return J(f)*(j?-1:1)}function Va(f){return ka?f.touch||f.originalEvent.touches[0]:f}function wb(f){return f.originalEvent}function A(f){return f===u?0:typeof f==xb?f:f+"px"}function Ca(f){return"#"+f}function zc(f,j,m){for(;f.length<j;)f=m+f;return f}function tb(f){return encodeURI(decodeURI(f))}function yb(f){return n.re.array.exec(f)?
f.split(n.re.array):f}function Xb(f){return!f.parents(zb).length}function Yb(f){return typeof f==xb?f:k.each(f,function(j,m){f[j]=m?+m:u})}function Ac(f,j,m){k.each(f,function(s,r){m=m||I[r+j]});return m}function Zb(f){try{console.warn("Deprecation - Please consult https://github.com/pisi/Reel/wiki/Deprecations")}catch(j){}return f}function Bc(f){try{console.error(f)}catch(j){}}if(!(!k||+k().jquery.replace(".",R).substr(0,2)<15)){var n=k.reel={version:"1.3-devel",def:{frame:1,frames:36,loops:true,
clickfree:false,draggable:true,scrollable:true,steppable:true,throwable:true,wheelable:true,orientable:false,cw:false,revolution:u,stitched:0,directional:false,row:1,rows:0,rowlock:false,framelock:false,orbital:0,vertical:false,inversed:false,footage:6,spacing:0,horizontal:true,suffix:"-reel",image:u,images:"",path:"",preload:"fidelity",shy:false,speed:0,delay:0,timeout:2,duration:u,rebound:0.5,entry:u,opening:0,brake:0.23,velocity:0,tempo:36,laziness:6,cursor:u,hint:"",indicator:0,klass:"",preloader:2,
area:u,attr:{},annotations:u,responsive:false,graph:u,monitor:u,step:u,steps:u},scan:function(){return k(y(B)+":not("+y(Ab)+" >)").each(function(f,j){f=k(j);j=f.data();j.images=yb(j.images);var m={};k(y($b)+"[data-for="+f.attr(ja)+"]").each(function(s,r){s=k(r);r=s.data();r.x=Yb(yb(r.x));r.y=Yb(yb(r.y));var g=s.attr(ja);r.node=s.removeData();m[g]=r});j.annotations=m;f.removeData().reel(j)})},fn:{reel:function(){var f=arguments,j=k(this),m=j.data(),s=f[0]||{},r=f[1];if(typeof s=="object"){var g=k.extend({},
n.def,s);f=j.filter(Bb).unreel().filter(function(){var i=k(this),c=g.attr,a=c.src||i.attr("src"),K=c.width||i.width();i=c.height||i.height();if(a&&K&&i)return true;else Bc("Missing attributes: Image needs `src` and both dimensions to be set to Reel")});var Z=[];g.step&&(g.frame=g.step);g.steps&&(g.frames=g.steps);f.each(function(){var i=k(this),c=function(b,d){return i.reel(b,d)&&i.data(b)},a=function(b){return i.reel(b)},K={setup:function(){if(!(i.hasClass(B)&&i.parent().hasClass(Ab))){c(Ia,g);var b=
i.attr(g.attr).attr("src"),d=c(ja,i.attr(ja)||i.attr(ja,B+"-"+ +new Date).attr(ja)),e=k.extend({},i.data()),h=c($,g.images||[]),p=c(X,g.stitched),o=!h.length||p;o=c(Wa,g.responsive&&(Cc?true:!o));var l=c(ac,{}),q=g.loops,w=g.orbital,t=g.revolution,z=g.rows,C=c(ra,Ga(g.footage,g.frames));c(Xa,g.spacing);var L=c(N,i.width()),la=c(aa,i.height()),Dc=c(Ja,g.shy),bc=c(O,w&&C||z<=1&&h.length||g.frames),Ec=z>1||w;c(Ka,Wb("x",t)||p/2||L*2);c(Cb,!Ec?0:Wb("y",t)||(z>3?la:la/(5-z)));z=p?1:ma(bc/C);c(Db,p-(q?
0:L));c(Ya,0);d=Ca(d+g.suffix);t=i[0].className||R;C=k(W(sa),{id:d.substr(1),"class":t+D+Ab+D+cc+"0"});C=i.wrap(C.addClass(g.klass)).attr({"class":B});Z.push(wc(C)[0]);C=C.parent().bind(K.instance);c(Eb,h.length?R:g.image||b.replace(n.re.image,"$1"+g.suffix+".$2"));c(Za,k(W(sa)));c(dc,[]);c(F,null);c(x,null);c(S,null);c(ta,null);c(Fb,z);c(ec,g.rowlock);c(fc,g.framelock);c($a,c(La,c(ab,0)));c(bb,1/(bc-(q&&!p?0:1)));c(gc,d);c(P,c(ua,g.speed)<0);c(Ma,false);c(na,0);c(va,g.vertical);c(ba,0);c(wa,Ha(1,
!g.cw&&!p));c(cb,{});c(ca,false);c(db,c(Gb,0));c(eb,c(fb,0));c(Na,false);c(Hb,false);c(da,false);c(hc,g.brake);c(Ib,!!w);c(ea,g.tempo/(n.lazy?g.laziness:1));c(xa,-1);c(gb,-1);c(Oa,g.annotations||C.unbind(y(Oa))&&{});c(Jb,1);c(ic,{src:b,classes:t,data:e,style:i.attr(ya)||R});g.steppable||C.unbind("up.steppable");g.indicator||C.unbind(".indicator");E(R,{overflow:Kb,position:"relative"});o||E(R,{width:L,height:la});o&&k.each(Fc,function($c,jc){l[jc]=a(jc)});E(oa+D+y(B),{display:Lb});fa.bind(K.pool);
i.trigger(Dc?"prepare":"setup")}},instance:{teardown:function(){var b=i.data(ic);i.parent().unbind(K.instance);if(a(Ja))i.unbind(hb,ga);else a(ya).remove()&&a(ib).unbind(G);a(Za).empty();clearTimeout(Mb);clearTimeout(Nb);k(I).unbind(kc,lc);xc(i.unbind(G).removeData().siblings().unbind(G).remove().end().attr({"class":b.classes,src:b.src,style:b.style}).data(b.data).unwrap());jb();fa.unbind(K.pool);ha.unbind(ia);k(I).unbind(G)},setup:function(){function b(q){return i.trigger("down",[Va(q).clientX,Va(q).clientY,
q])&&q.give}function d(q,w){return!w||i.trigger("wheel",[w,q])&&q.give}var e=i.parent().append(za()),h=c(ib,k(g.area||e)),p=g.rows>1;E(D+y(B),{MozUserSelect:kb,WebkitUserSelect:kb,MozTransform:"translateZ(0)"});i.unbind(hb,ga);if(ka)h.bind(Gc,b);else{var o=g.cursor,l=o==mc?Hc:o||Ic;o=o==mc?Jc+D+"!important":u;E(R,{cursor:Ua(l)});E(y(Ob),{cursor:"wait"});E(y(lb)+oa+y(lb)+" *",{cursor:Ua(o||l)},true);h.bind(g.wheelable?Kc:null,d).bind(g.clickfree?Lc:Mc,b).bind(Nc,function(){return false})}if(a(Wa)){E(D+
y(B),{width:"100%",height:Pb});k(I).bind(kc,lc)}g.hint&&h.attr("title",g.hint);g.indicator&&e.append(Pa("x"));p&&g.indicator&&e.append(Pa("y"));g.monitor&&e.append(nc=k(W(sa),{"class":oc}))&&E(D+y(oc),{position:mb,left:0,top:0})},preload:function(){function b(w,t){setTimeout(function(){!Xb(d)&&t.attr({src:tb(w)})},(l-o.length)*2)}var d=i.parent(),e=a($),h=!e.length,p=n.preload[g.preload]||n.preload[n.def.preload],o=h?[a(Eb)]:p(e.slice(0),g,a),l=o.length;c(ba,h?0.5:0);e=a(Za).empty();h=[];d.addClass(Ob);
c(ya,a(ya)||k("<"+ya+' type="text/css">'+E.rules.join("\n")+"</"+ya+">").prependTo(Qb));c(Ma,true);i.trigger("stop");g.responsive&&Rb();for(i.trigger("resize",true);o.length;){p=n.substitute(g.path+o.shift(),a);var q=k(W(Bb)).appendTo(e);q.bind("load error abort",function(w){w.type!="load"&&i.trigger(w.type);return!Xb(d)&&i.trigger("preloaded")&&false});b(p,q);h.push(p)}c(dc,h);c(Ja,false)},preloaded:function(){var b=a($).length||1,d=c(ba,Ga(a(ba)+1,b));if(d===b){i.parent().removeClass(Ob);i.trigger("loaded")}d===
1&&i.trigger("frameChange",[u,a(F)])},loaded:function(){a($).length>1||i.css({backgroundImage:Ea(n.substitute(g.path+a(Eb),a))}).attr({src:Ua(pc)});a(X)&&i.attr({src:Ua(pc)});a(Hb)||c(na,g.velocity||0);c(Ma,false);pa=true},prepare:function(){i.css("display",Lb).one(hb,ga)},opening:function(){if(!g.opening)return i.trigger("openingDone");c(da,true);c(Sb,!a(ua));var b=g.entry||g.speed,d=a(x),e=g.opening;c(x,d-b*e);c(xa,ma(e*Y(ea)))},openingDone:function(){function b(e){return i.trigger("orient",[wb(e).alpha,
wb(e).beta,wb(e).gamma,e])&&e.give}c(Qa,false);c(da,false);var d=nb+y(da);fa.unbind(d,K.pool[d]);ka&&g.orientable&&k(I).bind(Oc,b);if(g.delay>0)Mb=setTimeout(function(){i.trigger("play")},g.delay*1E3);else i.trigger("play")},play:function(b,d){d=d?c(ua,d):a(ua)*Ha(1,a(P));(b=g.duration)&&c(gb,ma(b*Y(ea)));c(P,d<0);d=c(Qa,!!d);c(Sb,!d);Aa()},reach:function(b,d,e){if(d!=a(F)){b=a(O);c(S,ma(d/b));var h=c($a,a(F));d=c(La,d);d=c(ab,n.math.distance(h,d,b));e=J(e||a(ua))*Ha(1,d<0);i.trigger("play",e)}},
pause:function(){v()},stop:function(){var b=c(Sb,true);c(Qa,!b)},down:function(b,d,e,h){function p(l){return i.trigger("pan",[Va(l).clientX,Va(l).clientY,l])&&l.give}function o(l){return i.trigger("up",[l])&&l.give}if(!(h&&h.button!=Pc&&!g.clickfree))if(g.draggable){c(ca,a(F));b=g.clickfree;c(na,0);ob=pb(a(Ka),d,e);ka||h&&h.preventDefault();v();jb();H=0;k(zb,ha).addClass(lb);ka?ha.bind(Qc,p).bind(Rc+D+Sc,o):(b?a(ib):ha).bind(Tc,p).bind(b?Uc:Vc,o)}},up:function(){c(ca,false);c(Na,false);var b=g.throwable,
d=J(Ra[0]+Ra[1])/60;Q=c(na,!b?0:b===true?d:Ga(b,d))?1:0;v();jb();k(zb,ha).removeClass(lb);(g.clickfree?a(ib):ha).unbind(ia)},pan:function(b,d,e,h){if(g.draggable&&Sa){Sa=false;v();b=g.rows;var p=g.orbital,o=ka&&!a(Na)&&b<=1&&!p&&g.scrollable,l={x:d-ob.x,y:e-ob.y},q={x:J(l.x),y:J(l.y)};if(h&&o&&q.x<q.y)return h.give=true;if(q.x>0||q.y>0){h&&(h.give=false);H=vb(q.x,q.y);ob={x:d,y:e};h=a(Ka);o=a(cb);q=a(va);if(!a(fc)){var w=c(x,qc(q?e-o.y:d-o.x,a(db),h,a(eb),a(fb),a(wa),q?e-o.y:d-o.x));c(Na,a(Na)||a(F)!=
a(ca));(l=rc(q?l.y:l.x||0))&&c(P,l<0)}if(p&&a(Ib)){c(va,J(e-o.y)>J(d-o.x));o=pb(h,d,e)}if(b>1&&!a(ec)){b=a(Cb);p=a(Gb);l=-p*b;c(ta,n.math.envelope(e-o.y,p,b,l,l+b,-1))}!(w%1)&&!g.loops&&pb(h,d,e)}}},wheel:function(b,d,e){if(d){qb=true;b=ma(qa.sqrt(J(d))/2);b=Ha(b,d>0);d=0.0833*a(Ka);pb(d);b&&c(P,b<0);c(na,0);c(x,qc(b,a(db),d,a(eb),a(fb),a(wa)));e&&e.preventDefault();e&&(e.give=false);v();i.trigger("up",[e])}},orient:function(b,d){if(!(!Sa||T)){sc=true;b=d/360;fraction=c(x,+(g.stitched||g.cw?1-b:b).toFixed(2));
Sa=false}},fractionChange:function(b,d,e){if(d!==u)return Zb(c(x,d));b=1+rb(e/a(bb));d=g.rows>1;e=g.orbital;c(Ib,!!e&&(b<=e||b>=a(ra)-e+2));if(d)b+=(a(S)-1)*a(O);c(F,b)},tierChange:function(b,d,e){if(d===u){b=c(S,M(Ta(e,1,g.rows)));d=a(O);e=a(F)%d||d;c(F,e+b*d-d)}},rowChange:function(b,d,e){if(d!==u)return c(S,d);c(ta,1/(g.rows-1)*(e-1))},frameChange:function(b,d,e){if(d!==u)return Zb(c(F,d));this.className=this.className.replace(n.re.frame_klass,cc+e);var h=a(O);d=g.rows;b=g.path;var p=e%h||h,o=
!!a(ba),l=((e-p)/h+1-1)/(d-1),q=M(Ta(l,1,d)),w=a(S);o&&q===w?a(ta):c(ta,l);p=Ga((p-1)/(h-1),0.9999);l=w*h-h;h=M(Ta(p,l+1,l+h));l=J((a(x)||0)-p)<1/(a(O)-1);o&&h===e&&l?a(x):c(x,p);var t=a(ra);if(g.orbital&&a(va)){e=g.inversed?t+1-e:e;e+=t}l=g.horizontal;var z=a(X);h=a($);var C=!h.length||z;q=a(Xa);var L=a(N),la=a(aa);if(C){if(z){e=c(Ya,M(Ta(p,0,a(Db)))%z);d=d<=1?0:(la+q)*(d-w);e=[A(-e),A(-d)];d=h.length>1&&h[w-1];b=n.substitute(b+d,a);d&&i.css("backgroundImage").search(b)<0&&i.css({backgroundImage:Ea(b)})}else{b=
e%t-1;b=b<0?t-1:b;e=rb((e-0.1)/t);e+=d>1?0:a(P)?0:!g.directional?0:a(Fb);e=e*((l?la:L)+q);b=b*((l?L:la)+q);e=h.length?[0,0]:l?[A(-b),A(-e)]:[A(-e),A(-b)]}i.css({backgroundPosition:e.join(D)})}else{e=h[e-1];a(Wa)&&Rb();o&&i.attr({src:tb(n.substitute(b+e,a))})}},"frameChange.reach":function(b,d,e){if(a(La)){b=n.math.distance(a($a),e,a(O));if(J(b)>=J(a(ab))){c(F,c(La));c(La,c(ab,c($a,0)));i.trigger("stop")}}},"imageChange imagesChange":function(){i.trigger("preload")},"fractionChange.indicator":function(b,
d,e){if(d===u&&g.indicator){b=g.indicator;var h=g.orbital;d=h&&a(va)?a(aa):a(N);h=h?a(ra):g.images.length||a(O);h=ma(d/h);d-=h;e=M(Ta(e,0,d));e=!g.cw||a(X)?e:d-e;Pa.$x.css(a(va)?{left:0,top:A(e),bottom:Pb,width:b,height:h}:{bottom:0,left:A(e),top:Pb,width:h,height:b})}},"tierChange.indicator":function(b,d,e){if(d===u&&g.rows>1&&g.indicator){var h=a(aa);b=g.indicator;d=ma(h/g.rows);h-=d;e=M(e*h);Pa.$y.css({left:0,top:e,width:b,height:d})}},"setup.annotations":function(){var b=i.parent();k.each(a(Oa),
function(d,e){var h=typeof e.node==xb?k(e.node):e.node||{};h=h.jquery?h:k(W(sa),h);h=h.attr({id:d}).addClass($b);var p=e.image?k(W(Bb),e.image):k(),o=e.link?k(W("a"),e.link).click(function(){i.trigger("up.annotations",{target:o})}):k();E(Ca(d),{display:kb,position:mb},true);e.image||e.link&&h.append(o);e.link||e.image&&h.append(p);e.link&&e.image&&h.append(o.append(p));h.appendTo(b)})},"prepare.annotations":function(){k.each(a(Oa),function(b){k(Ca(b)).hide()})},"frameChange.annotations":function(b,
d){if(!(!a(ba)||d!==u)){var e=a(N),h=a(X),p=a(Ya);k.each(a(Oa),function(o,l){o=k(Ca(o));var q=l.start||1,w=l.end,t=t||a(F),z=t-1,C=l.at?l.at[z]=="+":false;z=l.at?z:z-q+1;t=typeof l.x!=ub?l.x:l.x[z];var L=typeof l.y!=ub?l.y:l.y[z];l=t!==u&&L!==u&&(l.at?C:z>=0&&(!w||z<=w-q));if(h){q=t>h-e&&p>=0&&p<e;t=!(t<e&&p>h-e)?t:t+h;t=!q?t:t-h;t-=p}if(a(Wa)){q=a(Jb);t=t&&t*q;L=L&&L*q}t={display:l?Lb:kb,left:A(t),top:A(L)};o.css(t)})}},"up.annotations":function(b,d){if(!(H>10||qb)){b=k(d.target);(b.is("a")?b:b.parents("a")).attr("href")&&
(H=10)}},"up.steppable":function(){H||qb||i.trigger(a(cb).x-i.offset().left>0.5*a(N)?"stepRight":"stepLeft")},"stepLeft stepRight":function(){v()},stepLeft:function(){c(P,false);c(x,a(x)-a(bb)*a(wa))},stepRight:function(){c(P,true);c(x,a(x)+a(bb)*a(wa))},stepUp:function(){c(S,a(S)-1)},stepDown:function(){c(S,a(S)+1)},resize:function(b,d){if(!(a(Ma)&&!d)){var e=a(X),h=a(Xa);b=a(aa);var p=!a($).length||e,o=g.rows||1;e=a($).length?!e?u:A(e)+D+A(b):e&&A(e)+D+A((b+h)*o-h)||A((a(N)+h)*a(ra)-h)+D+A((b+h)*
a(Fb)*o*(g.directional?2:1)-h);i.css({height:p?A(b):null,backgroundSize:e});d||i.trigger("imagesChange")}},"setup.fu":function(){c(F,g.frame+(g.row-1)*a(O));i.trigger("preload")},"wheel.fu":function(){qb=false},"clean.fu":function(){i.trigger("teardown")},"loaded.fu":function(){i.trigger("opening")}},pool:{"tick.reel.preload":function(){if(!(!(pa||a(Ma))||a(Ja))){var b=a(N),d=Wc(za.$.css(N)),e=a($).length||1,h=M(1/e*a(ba)*b);za.$.css({width:d+(h-d)/3+1});if(a(ba)===e&&d>b-1){pa=false;za.$.fadeOut(300,
function(){za.$.css({opacity:1,width:0})})}}},"tick.reel":function(b){if(!a(Ja)){var d=a(na),e=Y(ea),h=g.monitor;if(!(!n.intense&&Xc())){if(Q){d=d-a(hc)/e*Q;d=c(na,d>0.1?d:(Q=T=0))}h&&nc.text(a(h));d&&Q++;T&&T++;rc(0);Sa=true;if(T&&!d)return U(b);if(a(ca))return U(b,v());if(!(a(xa)>0)){if(!g.loops&&g.rebound){!T&&!(a(x)%1)?Tb++:(Tb=0);Tb>=g.rebound*1E3/e&&c(P,!a(P))}b=a(wa)*Ha(1,a(P));e=a(gb);d=(!a(Qa)||sc||!e?d:J(a(ua))+d)/Y(ea);c(x,a(x)-d*b);e=!g.duration?e:e>0&&c(gb,e-1);!e&&a(Qa)&&i.trigger("stop")}}}},
"tick.reel.opening":function(){if(a(da)){var b=(g.entry||g.speed)/Y(ea)*(g.cw?-1:1),d=c(xa,a(xa)-1);c(x,a(x)+b);d||i.trigger("openingDone")}}}},pa=false,U=function(b,d){return b.stopImmediatePropagation()||d},ga=function(){i.trigger("setup")},T,Q=0,Aa=function(){return T=0},v=function(){clearTimeout(Mb);fa.unbind(nb+y(da),K.pool[nb+y(da)]);c(xa,0);c(Hb,true);return T=-g.timeout*Y(ea)},H=0,qb=false,sc=false,nc=k(),za=function(){E(D+y(tc),{position:mb,left:0,bottom:0,height:g.preloader,overflow:Kb,
backgroundColor:"#000"});return za.$=k(W(sa),{"class":tc})},Pa=function(b){E(D+y(uc)+y(b),{position:mb,width:0,height:0,overflow:Kb,backgroundColor:"#000"});return Pa["$"+b]=k(W(sa),{"class":uc+D+b})},E=function(b,d,e){function h(p){var o=[];k.each(p,function(l,q){o.push(l.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+A(q)+";")});return"{"+o.join(R)+"}"}e=e?R:a(gc);b=b.replace(/^/,e).replace(oa,oa+e);return E.rules.push(b+h(d))&&d},Xc=function(){var b=a(aa),d=i[0].getBoundingClientRect();return d.top<
-b||d.bottom>b+k(I).height()},Tb=0,ob={x:0,y:0},rc=function(b){return Ra.push(b)&&Ra.shift()&&b},jb=function(){return Ra=[0,0]},Ra=jb(),qc=g.graph||n.math[g.loops?"hatch":"envelope"],lc=function(){clearTimeout(Nb);Nb=setTimeout(Rb,n.resize_gauge)},Rb=function(){if(i.width()!=a(N)){var b=a(ac),d=c(Jb,i.width()/b.width);k.each(b,function(e,h){c(e,M(h*d))});i.trigger("resize")}},Mb,Nb,pb=function(b,d,e){var h=c(db,a(x));c(Gb,a(ta));var p=g.loops;c(eb,p?0:-h*b);c(fb,p?b:b-h*b);return d!==u&&c(cb,{x:d,
y:e})||u},Sa=true,ha=fa;try{if(fa[0]!=top.document)ha=fa.add(top.document)}catch(ad){}top===self?k():function(b){k("iframe",ha.last()).each(function(){try{if(k(this).contents().find(Qb).html()==k(Qb).html())return(b=k(this))&&false}catch(d){}});return b}();E.rules=[];K.setup()});sb=sb||function i(){var c=+new Date,a=Y(ea);if(!a)return sb=null;fa.trigger(nb);n.cost=(+new Date+n.cost-c)/2;return sb=n.setTimeout(i,vb(4,1E3/a-n.cost))}();return k(Z)}else if(typeof s=="string")if(f.length==1){r=m[s];j.trigger("recall",
[s,r]);return r}else{if(r!==u){n.normal[s]&&(r=n.normal[s](r,m));if(m[s]===u)m[s]=r;else if(m[s]!==r)j.trigger(s+"Change",[u,m[s]=r])}return j.trigger("store",[s,r])}},unreel:function(){return this.trigger("teardown")}},re:{image:/^(.*)\.(jpg|jpeg|png|gif)\??.*$/i,ua:[/(msie|opera|firefox|chrome|safari)[ \/:]([\d.]+)/i,/(webkit)\/([\d.]+)/i,/(mozilla)\/([\d.]+)/i],array:/ *, */,touchy_agent:/iphone|ipod|ipad|android|fennec|rim tablet/i,lazy_agent:/\(iphone|ipod|android|fennec|blackberry/i,frame_klass:/frame-\d+/,
substitution:/(@([A-Z]))/g,sequence:/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\.\.([0-9]+))($|[|]([0-9]+)$)/},cdn:"http://code.vostrel.net/",math:{envelope:function(f,j,m,s,r,g){return j+Fa(s,r,-f*g)/m},hatch:function(f,j,m,s,r,g){f=(f<s?r:0)+f%r;f=j+-f*g/m;return f-rb(f)},interpolate:function(f,j,m){return j+f*(m-j)},distance:function(f,j,m){var s=m/2;f=j-f;return f<-s?f+m:f>s?f-m:f}},preload:{fidelity:function(f,j,m){function s(c,a,K){function pa(H){for(;!(H>=1&&H<=Q);)H+=H<1?+Q:-Q;return i[K+H]||(i[K+
H]=!!U.push(H))}if(!c.length)return[];var U=[],ga=4*a,T=j.frame,Q=c.length;a=true;for(var Aa=Q/ga,v=0;v<ga;v++)pa(T+M(v*Aa));for(;Aa>1;){v=0;ga=U.length;Aa/=2;for(a=!a;v<ga;v++)pa(U[v]+(a?1:-1)*M(Aa))}for(v=0;v<=Q;v++)pa(v);for(v=0;v<U.length;v++)U[v]=c[U[v]-1];return U}var r=j.orbital,g=r?2:j.rows||1,Z=r?m(ra):m(O);m=(j.row-1)*Z;r=[].concat(f);var i=new Array(f.length+1);f=g<2?[]:r.slice(m,m+Z);return s(f,1,m).concat(s(r,g,0))},linear:function(f){return f}},substitute:function(f,j){return f.replace(n.re.substitution,
function(m,s,r){return typeof n.substitutes[r]=="function"?n.substitutes[r](j):vc[r]?j(vc[r]):s})},substitutes:{T:function(){return+new Date}},normal:{fraction:function(f,j){if(f===null)return f;return j[Ia].loops?f-rb(f):Fa(0,1,f)},tier:function(f){if(f===null)return f;return Fa(0,1,f)},row:function(f,j){if(f===null)return f;return M(Fa(1,j[Ia].rows,f))},frame:function(f,j){if(f===null)return f;var m=j[Ia];j=j[O]*(m.orbital?2:m.rows||1);f=M(m.loops?f%j||j:Fa(1,j,f));return f<0?f+j:f},images:function(f,
j){var m=n.re.sequence.exec(f);return!m?f:n.sequence(m,j[Ia])}},sequence:function(f,j){if(f.length<=1)return j.images;var m=[],s=j.orbital,r=f[1],g=f[2],Z=+f[4]||1,i=s?2:j.rows||1;j=s?j.footage:j.stitched?1:j.frames;i=+(f[5]||i*j)-Z;f=+f[7]||1;for(j=0;j<=i;){m.push(r.replace(g,zc(Z+j+R,g.length,"0")));j+=f}return m},setTimeout:function(f,j){if(!n.raf)return setTimeout.call(I,f,j);var m=+new Date,s=function(){+new Date>=m+j?f.call(I):n.raf.call(I,s)};s()},raf:Ac("r|webkitR|mozR|msR|oR".split("|"),
"equestAnimationFrame")||null,instances:k(),leader:Y,resize_gauge:300,cost:0},fa=k(V);V=navigator.userAgent;var Ba=n.re.ua[0].exec(V)||n.re.ua[1].exec(V)||n.re.ua[2].exec(V),Ub=+Ba[2].split(".").slice(0,2).join(".");Ba=Ba[1]=="MSIE";var Yc=!(Ba&&Ub<8),Cc=!(Ba&&Ub<9),sb,B="reel",Ab=B+"-overlay",uc=B+"-indicator",tc=B+"-preloader",oc=B+"-monitor",$b=B+"-annotation",lb=B+"-panning",Ob=B+"-loading",cc="frame-",qa=Math,M=qa.round,rb=qa.floor,ma=qa.ceil,Ga=qa.min,vb=qa.max,J=qa.abs,Wc=parseInt,Ta=n.math.interpolate,
Oa="annotations",ib="area",Pb="auto",ic="backup",P="backwards",bb="bit",hc="brake",Za="cache",dc=Za+"d",Ib="center",hb="click",ca=hb+"ed",cb=ca+"_location",db=ca+"_on",Gb=ca+"_tier",wa="cwish",$a="departure",La="destination",ab="distance",ra="footage",x="fraction",F="frame",fc="framelock",O="frames",aa="height",fb="hi",Kb="hidden",Eb="image",$="images",Ma="loading",da="opening",xa=da+"_ticks",eb="lo",Ia="options",Qa="playing",ba="preloaded",Jb="ratio",Na="reeling",Hb="reeled",Wa="responsive",Ka="revolution",
Cb="revolution_y",S="row",ec="rowlock",Fb="rows",Ja="shy",Xa="spacing",ua="speed",gc="stage",X="stitched",Ya=X+"_shift",Db=X+"_travel",Sb="stopped",ya="style",ea="tempo",gb="ticks",ta="tier",ac="truescale",na="velocity",va="vertical",N="width",G=y(B),ia=y("pan")+G,Nc="dragstart"+G,Mc="mousedown"+G,Lc="mouseenter"+G,Uc="mouseleave"+ia,Tc="mousemove"+ia,Vc="mouseup"+ia,Kc="mousewheel"+G,nb="tick"+G,Sc="touchcancel"+ia,Rc="touchend"+ia,Gc="touchstart"+G,Qc="touchmove"+ia,Oc="deviceorientation"+G,kc=
"resize"+G,R="",D=" ",oa=",",mb="absolute",Lb="block",Da="@CDN@",sa="div",mc="hand",Qb="head",zb="html",ja="id",Bb="img",Vb="jquery."+B,kb="none",ub="object",xb="string",Fc=[N,aa,Xa,Ka,Cb,X,Ya,Db],vc={W:N,H:aa},pc=Yc?yc("CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7"):Da+"blank.gif",Ic=Ea(Da+Vb+".cur")+oa+"move",Hc=Ea(Da+Vb+"-drag.cur")+oa+"move",Jc=Ea(Da+Vb+"-drag-down.cur")+oa+"move",ka=n.touchy=n.re.touchy_agent.test(V);n.lazy=n.re.lazy_agent.test(V);var Pc=ka?u:Ba&&Ub<9?1:0,Zc=k.cleanData;
k.cleanData=function(f){Zc(k(f).each(function(){k(this).triggerHandler("clean")}))};k.extend(k.fn,n.fn)&&k(n.scan);return n}}(jQuery,window,document)});
