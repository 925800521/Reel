/*
 Copyright (c) 2009-2013 Petr Vostrel (http://petr.vostrel.cz/)
 Licensed under the MIT License (LICENSE.txt).

 jQuery Reel
 http://reel360.org
 Version: 1.3-devel
 Updated: 2013-08-31

 Requires jQuery 1.5 or higher
*/
(function(k){var X=typeof define=="function"&&define.amd&&(define(["jquery"],k)||true),U=!X&&typeof module=="object"&&typeof module.exports=="object"&&(module.exports=k);!X&&!U&&k()})(function(){return jQuery.reel||function(k,X,U,u){function wc(f){return n.instances.push(f[0])&&f}function xc(f){return(n.instances=n.instances.not(Ca(f.attr(ia))))&&f}function Y(f){return n.instances.first().data(f)}function yc(f){return"data:image/gif;base64,R0lGODlh"+f}function V(f){return"<"+f+"/>"}function y(f){return"."+
(f||"")}function Va(f){return f.replace(Da,n.cdn)}function Ea(f){return"url('"+sb(f)+"')"}function Wb(f,j){return typeof j==tb?j[f]:j}function Fa(f,j,p){return ub(f,Ga(j,p))}function Ha(f,j){return I(f)*(j?-1:1)}function Wa(f){return ja?f.touch||f.originalEvent.touches[0]:f}function vb(f){return f.originalEvent}function A(f){return f===u?0:typeof f==wb?f:f+"px"}function Ca(f){return"#"+f}function zc(f,j,p){for(;f.length<j;)f=p+f;return f}function sb(f){return encodeURI(decodeURI(f))}function xb(f){return n.re.array.exec(f)?
f.split(n.re.array):f}function Xb(f){return!f.parents(yb).length}function Yb(f){return typeof f==wb?f:k.each(f,function(j,p){f[j]=p?+p:u})}function Zb(f){try{console.warn("Deprecation - Please consult https://github.com/pisi/Reel/wiki/Deprecations")}catch(j){}return f}function Ac(f){try{console.error(f)}catch(j){}}if(!(!k||+k().jquery.replace(".",Q).substr(0,2)<15)){var n=k.reel={version:"1.3-devel",def:{frame:1,frames:36,loops:true,clickfree:false,draggable:true,scrollable:true,steppable:true,throwable:true,
wheelable:true,orientable:false,cw:false,revolution:u,stitched:0,directional:false,row:1,rows:0,rowlock:false,framelock:false,orbital:0,vertical:false,inversed:false,footage:6,spacing:0,horizontal:true,suffix:"-reel",image:u,images:"",path:"",preload:"fidelity",shy:false,speed:0,delay:0,timeout:2,duration:u,rebound:0.5,entry:u,opening:0,brake:0.23,velocity:0,tempo:36,laziness:6,cursor:u,hint:"",indicator:0,klass:"",preloader:2,area:u,attr:{},annotations:u,responsive:false,graph:u,monitor:u,step:u,
steps:u},scan:function(){return k(y(B)+":not("+y(zb)+" >)").each(function(f,j){f=k(j);j=f.data();j.images=xb(j.images);var p={};k(y($b)+"[data-for="+f.attr(ia)+"]").each(function(s,r){s=k(r);r=s.data();r.x=Yb(xb(r.x));r.y=Yb(xb(r.y));var g=s.attr(ia);r.node=s.removeData();p[g]=r});j.annotations=p;f.removeData().reel(j)})},fn:{reel:function(){var f=arguments,j=k(this),p=j.data(),s=f[0]||{},r=f[1];if(typeof s=="object"){var g=k.extend({},n.def,s);f=j.filter(Ab).unreel().filter(function(){var i=k(this),
c=g.attr,a=c.src||i.attr("src"),J=c.width||i.width();i=c.height||i.height();if(a&&J&&i)return true;else Ac("Missing attributes: Image needs `src` and both dimensions to be set to Reel")});var Z=[];g.step&&(g.frame=g.step);g.steps&&(g.frames=g.steps);f.each(function(){var i=k(this),c=function(b,d){return i.reel(b,d)&&i.data(b)},a=function(b){return i.reel(b)},J={setup:function(){if(!(i.hasClass(B)&&i.parent().hasClass(zb))){c(Ia,g);var b=i.attr(g.attr).attr("src"),d=c(ia,i.attr(ia)||i.attr(ia,B+"-"+
+new Date).attr(ia)),e=k.extend({},i.data()),h=c($,g.images||[]),o=c(W,g.stitched),m=!h.length||o;m=c(Xa,g.responsive&&(Bc?true:!m));var l=c(ac,{}),q=g.loops,w=g.orbital,t=g.revolution,z=g.rows,C=c(ra,Ga(g.footage,g.frames));c(Ya,g.spacing);var K=c(M,i.width()),ka=c(aa,i.height()),Cc=c(Ja,g.shy),bc=c(N,w&&C||z<=1&&h.length||g.frames),Dc=z>1||w;c(Ka,Wb("x",t)||o/2||K*2);c(Bb,!Dc?0:Wb("y",t)||(z>3?ka:ka/(5-z)));z=o?1:la(bc/C);c(Cb,o-(q?0:K));c(Za,0);d=Ca(d+g.suffix);t=i[0].className||Q;C=k(V(sa),{id:d.substr(1),
"class":t+D+zb+D+cc+"0"});C=i.wrap(C.addClass(g.klass)).attr({"class":B});Z.push(wc(C)[0]);C=C.parent().bind(J.instance);c(Db,h.length?Q:g.image||b.replace(n.re.image,"$1"+g.suffix+".$2"));c($a,k(V(sa)));c(dc,[]);c(F,null);c(x,null);c(R,null);c(ta,null);c(Eb,z);c(ec,g.rowlock);c(fc,g.framelock);c(ab,c(La,c(bb,0)));c(cb,1/(bc-(q&&!o?0:1)));c(gc,d);c(O,c(ua,g.speed)<0);c(Ma,false);c(ma,0);c(va,g.vertical);c(ba,0);c(wa,Ha(1,!g.cw&&!o));c(db,{});c(ca,false);c(eb,c(Fb,0));c(fb,c(gb,0));c(Na,false);c(Gb,
false);c(da,false);c(hc,g.brake);c(Hb,!!w);c(ea,g.tempo/(n.lazy?g.laziness:1));c(xa,-1);c(hb,-1);c(Oa,g.annotations||C.unbind(y(Oa))&&{});c(Ib,1);c(ic,{src:b,classes:t,data:e,style:i.attr(ya)||Q});g.steppable||C.unbind("up.steppable");g.indicator||C.unbind(".indicator");E(Q,{overflow:Jb,position:"relative"});m||E(Q,{width:K,height:ka});m&&k.each(Ec,function(Zc,jc){l[jc]=a(jc)});E(na+D+y(B),{display:Kb});fa.bind(J.pool);i.trigger(Cc?"prepare":"setup")}},instance:{teardown:function(){var b=i.data(ic);
i.parent().unbind(J.instance);if(!a(Ja)){a(ya).remove();a($a).empty();a(ib).unbind(G)}clearTimeout(Lb);clearTimeout(Mb);k(X).unbind(kc,lc);xc(i.unbind(G).removeData().siblings().unbind(G).remove().end().attr({"class":b.classes,src:b.src,style:b.style}).data(b.data).unwrap());jb();fa.unbind(J.pool);ga.unbind(ha);k(X).unbind(G)},setup:function(){function b(q){return i.trigger("down",[Wa(q).clientX,Wa(q).clientY,q])&&q.give}function d(q,w){return!w||i.trigger("wheel",[w,q])&&q.give}var e=i.parent().append(za()),
h=c(ib,k(g.area||e)),o=g.rows>1;E(D+y(B),{MozUserSelect:kb,WebkitUserSelect:kb,MozTransform:"translateZ(0)"});i.unbind(Nb,oa);if(ja)h.bind(Fc,b);else{var m=g.cursor,l=m==mc?Gc:m||Hc;m=m==mc?Ic+D+"!important":u;E(Q,{cursor:Va(l)});E(y(Ob),{cursor:"wait"});E(y(lb)+na+y(lb)+" *",{cursor:Va(m||l)},true);h.bind(g.wheelable?Jc:null,d).bind(g.clickfree?Kc:Lc,b).bind(Mc,function(){return false})}if(a(Xa)){E(D+y(B),{width:"100%",height:Pb});k(X).bind(kc,lc)}g.hint&&h.attr("title",g.hint);g.indicator&&e.append(Pa("x"));
o&&g.indicator&&e.append(Pa("y"));g.monitor&&e.append(nc=k(V(sa),{"class":oc}))&&E(D+y(oc),{position:mb,left:0,top:0})},preload:function(){function b(w,t){setTimeout(function(){!Xb(d)&&t.attr({src:sb(w)})},(l-m.length)*2)}var d=i.parent(),e=a($),h=!e.length,o=n.preload[g.preload]||n.preload[n.def.preload],m=h?[a(Db)]:o(e.slice(0),g,a),l=m.length;c(ba,h?0.5:0);e=a($a).empty();h=[];d.addClass(Ob);c(ya,a(ya)||k("<"+ya+' type="text/css">'+E.rules.join("\n")+"</"+ya+">").prependTo(Qb));c(Ma,true);i.trigger("stop");
g.responsive&&Rb();for(i.trigger("resize",true);m.length;){o=n.substitute(g.path+m.shift(),a);var q=k(V(Ab)).appendTo(e);q.bind("load error abort",function(w){w.type!="load"&&i.trigger(w.type);return!Xb(d)&&i.trigger("preloaded")&&false});b(o,q);h.push(o)}c(dc,h);c(Ja,false)},preloaded:function(){var b=a($).length||1,d=c(ba,Ga(a(ba)+1,b));if(d===b){i.parent().removeClass(Ob);i.trigger("loaded")}d===1&&i.trigger("frameChange",[u,a(F)])},loaded:function(){a($).length>1||i.css({backgroundImage:Ea(n.substitute(g.path+
a(Db),a))}).attr({src:Va(pc)});a(W)&&i.attr({src:Va(pc)});a(Gb)||c(ma,g.velocity||0);c(Ma,false);pa=true},prepare:function(){i.css("display",Kb).one(Nb,oa)},opening:function(){if(!g.opening)return i.trigger("openingDone");c(da,true);c(Sb,!a(ua));var b=g.entry||g.speed,d=a(x),e=g.opening;c(x,d-b*e);c(xa,la(e*Y(ea)))},openingDone:function(){function b(e){return i.trigger("orient",[vb(e).alpha,vb(e).beta,vb(e).gamma,e])&&e.give}c(Qa,false);c(da,false);var d=nb+y(da);fa.unbind(d,J.pool[d]);ja&&g.orientable&&
k(X).bind(Nc,b);if(g.delay>0)Lb=setTimeout(function(){i.trigger("play")},g.delay*1E3);else i.trigger("play")},play:function(b,d){d=d?c(ua,d):a(ua)*Ha(1,a(O));(b=g.duration)&&c(hb,la(b*Y(ea)));c(O,d<0);d=c(Qa,!!d);c(Sb,!d);Aa()},reach:function(b,d,e){if(d!=a(F)){b=a(N);c(R,la(d/b));var h=c(ab,a(F));d=c(La,d);d=c(bb,n.math.distance(h,d,b));e=I(e||a(ua))*Ha(1,d<0);i.trigger("play",e)}},pause:function(){v()},stop:function(){var b=c(Sb,true);c(Qa,!b)},down:function(b,d,e,h){function o(l){return i.trigger("pan",
[Wa(l).clientX,Wa(l).clientY,l])&&l.give}function m(l){return i.trigger("up",[l])&&l.give}if(!(h&&h.button!=Oc&&!g.clickfree))if(g.draggable){c(ca,a(F));b=g.clickfree;c(ma,0);Ra=ob(a(Ka),d,e);ja||h&&h.preventDefault();v();jb();H=0;k(yb,ga).addClass(lb);ja?ga.bind(Pc,o).bind(Qc+D+Rc,m):(b?a(ib):ga).bind(Sc,o).bind(b?Tc:Uc,m)}},up:function(){c(ca,false);c(Na,false);var b=g.throwable,d=I(Sa[0]+Sa[1])/60;P=c(ma,!b?0:b===true?d:Ga(b,d))?1:0;v();jb();k(yb,ga).removeClass(lb);(g.clickfree?a(ib):ga).unbind(ha)},
pan:function(b,d,e,h){if(g.draggable&&Ta){Ta=false;v();console.log(Ra);b=g.rows;var o=g.orbital,m=ja&&!a(Na)&&b<=1&&!o&&g.scrollable,l={x:d-Ra.x,y:e-Ra.y},q={x:I(l.x),y:I(l.y)};if(h&&m&&q.x<q.y)return h.give=true;if(q.x>0||q.y>0){h&&(h.give=false);H=ub(q.x,q.y);Ra={x:d,y:e};h=a(Ka);m=a(db);q=a(va);if(!a(fc)){var w=c(x,qc(q?e-m.y:d-m.x,a(eb),h,a(fb),a(gb),a(wa),q?e-m.y:d-m.x));c(Na,a(Na)||a(F)!=a(ca));(l=rc(q?l.y:l.x||0))&&c(O,l<0)}if(o&&a(Hb)){c(va,I(e-m.y)>I(d-m.x));m=ob(h,d,e)}if(b>1&&!a(ec)){b=
a(Bb);o=a(Fb);l=-o*b;c(ta,n.math.envelope(e-m.y,o,b,l,l+b,-1))}!(w%1)&&!g.loops&&ob(h,d,e)}}},wheel:function(b,d,e){if(d){pb=true;b=la(qa.sqrt(I(d))/2);b=Ha(b,d>0);d=0.0833*a(Ka);ob(d);b&&c(O,b<0);c(ma,0);c(x,qc(b,a(eb),d,a(fb),a(gb),a(wa)));e&&e.preventDefault();e&&(e.give=false);v();i.trigger("up",[e])}},orient:function(b,d){if(!(!Ta||S)){sc=true;b=d/360;fraction=c(x,+(g.stitched||g.cw?1-b:b).toFixed(2));Ta=false}},fractionChange:function(b,d,e){if(d!==u)return Zb(c(x,d));b=1+qb(e/a(cb));d=g.rows>
1;e=g.orbital;c(Hb,!!e&&(b<=e||b>=a(ra)-e+2));if(d)b+=(a(R)-1)*a(N);c(F,b)},tierChange:function(b,d,e){if(d===u){b=c(R,L(Ua(e,1,g.rows)));d=a(N);e=a(F)%d||d;c(F,e+b*d-d)}},rowChange:function(b,d,e){if(d!==u)return c(R,d);c(ta,1/(g.rows-1)*(e-1))},frameChange:function(b,d,e){if(d!==u)return Zb(c(F,d));this.className=this.className.replace(n.re.frame_klass,cc+e);var h=a(N);d=g.rows;b=g.path;var o=e%h||h,m=!!a(ba),l=((e-o)/h+1-1)/(d-1),q=L(Ua(l,1,d)),w=a(R);m&&q===w?a(ta):c(ta,l);o=Ga((o-1)/(h-1),0.9999);
l=w*h-h;h=L(Ua(o,l+1,l+h));l=I((a(x)||0)-o)<1/(a(N)-1);m&&h===e&&l?a(x):c(x,o);var t=a(ra);if(g.orbital&&a(va)){e=g.inversed?t+1-e:e;e+=t}l=g.horizontal;var z=a(W);h=a($);var C=!h.length||z;q=a(Ya);var K=a(M),ka=a(aa);if(C){if(z){e=c(Za,L(Ua(o,0,a(Cb)))%z);d=d<=1?0:(ka+q)*(d-w);e=[A(-e),A(-d)];d=h.length>1&&h[w-1];b=n.substitute(b+d,a);d&&i.css("backgroundImage").search(b)<0&&i.css({backgroundImage:Ea(b)})}else{b=e%t-1;b=b<0?t-1:b;e=qb((e-0.1)/t);e+=d>1?0:a(O)?0:!g.directional?0:a(Eb);e=e*((l?ka:
K)+q);b=b*((l?K:ka)+q);e=h.length?[0,0]:l?[A(-b),A(-e)]:[A(-e),A(-b)]}i.css({backgroundPosition:e.join(D)})}else{e=h[e-1];a(Xa)&&Rb();m&&i.attr({src:sb(n.substitute(b+e,a))})}},"frameChange.reach":function(b,d,e){if(a(La)){b=n.math.distance(a(ab),e,a(N));if(I(b)>=I(a(bb))){c(F,c(La));c(La,c(bb,c(ab,0)));i.trigger("stop")}}},"imageChange imagesChange":function(){i.trigger("preload")},"fractionChange.indicator":function(b,d,e){if(d===u&&g.indicator){b=g.indicator;var h=g.orbital;d=h&&a(va)?a(aa):a(M);
h=h?a(ra):g.images.length||a(N);h=la(d/h);d-=h;e=L(Ua(e,0,d));e=!g.cw||a(W)?e:d-e;Pa.$x.css(a(va)?{left:0,top:A(e),bottom:Pb,width:b,height:h}:{bottom:0,left:A(e),top:Pb,width:h,height:b})}},"tierChange.indicator":function(b,d,e){if(d===u&&g.rows>1&&g.indicator){var h=a(aa);b=g.indicator;d=la(h/g.rows);h-=d;e=L(e*h);Pa.$y.css({left:0,top:e,width:b,height:d})}},"setup.annotations":function(){var b=i.parent();k.each(a(Oa),function(d,e){var h=typeof e.node==wb?k(e.node):e.node||{};h=h.jquery?h:k(V(sa),
h);h=h.attr({id:d}).addClass($b);var o=e.image?k(V(Ab),e.image):k(),m=e.link?k(V("a"),e.link).click(function(){i.trigger("up.annotations",{target:m})}):k();E(Ca(d),{display:kb,position:mb},true);e.image||e.link&&h.append(m);e.link||e.image&&h.append(o);e.link&&e.image&&h.append(m.append(o));h.appendTo(b)})},"prepare.annotations":function(){k.each(a(Oa),function(b){k(Ca(b)).hide()})},"frameChange.annotations":function(b,d){if(!(!a(ba)||d!==u)){var e=a(M),h=a(W),o=a(Za);k.each(a(Oa),function(m,l){m=
k(Ca(m));var q=l.start||1,w=l.end,t=t||a(F),z=t-1,C=l.at?l.at[z]=="+":false;z=l.at?z:z-q+1;t=typeof l.x!=tb?l.x:l.x[z];var K=typeof l.y!=tb?l.y:l.y[z];l=t!==u&&K!==u&&(l.at?C:z>=0&&(!w||z<=w-q));if(h){q=t>h-e&&o>=0&&o<e;t=!(t<e&&o>h-e)?t:t+h;t=!q?t:t-h;t-=o}if(a(Xa)){q=a(Ib);t=t&&t*q;K=K&&K*q}t={display:l?Kb:kb,left:A(t),top:A(K)};m.css(t)})}},"up.annotations":function(b,d){if(!(H>10||pb)){b=k(d.target);(b.is("a")?b:b.parents("a")).attr("href")&&(H=10)}},"up.steppable":function(){H||pb||i.trigger(a(db).x-
i.offset().left>0.5*a(M)?"stepRight":"stepLeft")},"stepLeft stepRight":function(){v()},stepLeft:function(){c(O,false);c(x,a(x)-a(cb)*a(wa))},stepRight:function(){c(O,true);c(x,a(x)+a(cb)*a(wa))},stepUp:function(){c(R,a(R)-1)},stepDown:function(){c(R,a(R)+1)},resize:function(b,d){if(!(a(Ma)&&!d)){var e=a(W),h=a(Ya);b=a(aa);var o=!a($).length||e,m=g.rows||1;e=a($).length?!e?u:A(e)+D+A(b):e&&A(e)+D+A((b+h)*m-h)||A((a(M)+h)*a(ra)-h)+D+A((b+h)*a(Eb)*m*(g.directional?2:1)-h);i.css({height:o?A(b):null,backgroundSize:e});
d||i.trigger("imagesChange")}},"setup.fu":function(){c(F,g.frame+(g.row-1)*a(N));i.trigger("preload")},"wheel.fu":function(){pb=false},"clean.fu":function(){i.trigger("teardown")},"loaded.fu":function(){i.trigger("opening")}},pool:{"tick.reel.preload":function(){if(!(!(pa||a(Ma))||a(Ja))){var b=a(M),d=Vc(za.$.css(M)),e=a($).length||1,h=L(1/e*a(ba)*b);za.$.css({width:d+(h-d)/3+1});if(a(ba)===e&&d>b-1){pa=false;za.$.fadeOut(300,function(){za.$.css({opacity:1,width:0})})}}},"tick.reel":function(b){if(!a(Ja)){var d=
a(ma),e=Y(ea),h=g.monitor;if(!(!n.intense&&Wc())){if(P){d=d-a(hc)/e*P;d=c(ma,d>0.1?d:(P=S=0))}h&&nc.text(a(h));d&&P++;S&&S++;rc(0);Ta=true;if(S&&!d)return T(b);if(a(ca))return T(b,v());if(!(a(xa)>0)){if(!g.loops&&g.rebound){!S&&!(a(x)%1)?Tb++:(Tb=0);Tb>=g.rebound*1E3/e&&c(O,!a(O))}b=a(wa)*Ha(1,a(O));e=a(hb);d=(!a(Qa)||sc||!e?d:I(a(ua))+d)/Y(ea);c(x,a(x)-d*b);e=!g.duration?e:e>0&&c(hb,e-1);!e&&a(Qa)&&i.trigger("stop")}}}},"tick.reel.opening":function(){if(a(da)){var b=(g.entry||g.speed)/Y(ea)*(g.cw?
-1:1),d=c(xa,a(xa)-1);c(x,a(x)+b);d||i.trigger("openingDone")}}}},pa=false,T=function(b,d){return b.stopImmediatePropagation()||d},oa=function(){i.trigger("setup")},S,P=0,Aa=function(){return S=0},v=function(){clearTimeout(Lb);fa.unbind(nb+y(da),J.pool[nb+y(da)]);c(xa,0);c(Gb,true);return S=-g.timeout*Y(ea)},H=0,pb=false,sc=false,nc=k(),za=function(){E(D+y(tc),{position:mb,left:0,bottom:0,height:g.preloader,overflow:Jb,backgroundColor:"#000"});return za.$=k(V(sa),{"class":tc})},Pa=function(b){E(D+
y(uc)+y(b),{position:mb,width:0,height:0,overflow:Jb,backgroundColor:"#000"});return Pa["$"+b]=k(V(sa),{"class":uc+D+b})},E=function(b,d,e){function h(o){var m=[];k.each(o,function(l,q){m.push(l.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+A(q)+";")});return"{"+m.join(Q)+"}"}e=e?Q:a(gc);b=b.replace(/^/,e).replace(na,na+e);return E.rules.push(b+h(d))&&d},Wc=function(){var b=a(aa),d=i[0].getBoundingClientRect();return d.top<-b||d.bottom>b+k(X).height()},Tb=0,Ra={x:0,y:0},rc=function(b){return Sa.push(b)&&
Sa.shift()&&b},jb=function(){return Sa=[0,0]},Sa=jb(),qc=g.graph||n.math[g.loops?"hatch":"envelope"],lc=function(){clearTimeout(Mb);Mb=setTimeout(Rb,n.resize_gauge)},Rb=function(){if(i.width()!=a(M)){var b=a(ac),d=c(Ib,i.width()/b.width);k.each(b,function(e,h){c(e,L(h*d))});i.trigger("resize")}},Lb,Mb,ob=function(b,d,e){var h=c(eb,a(x));c(Fb,a(ta));var o=g.loops;c(fb,o?0:-h*b);c(gb,o?b:b-h*b);return d!==u&&c(db,{x:d,y:e})||u},Ta=true,ga=fa;try{if(fa[0]!=top.document)ga=fa.add(top.document)}catch($c){}top===
self?k():function(b){k("iframe",ga.last()).each(function(){try{if(k(this).contents().find(Qb).html()==k(Qb).html())return(b=k(this))&&false}catch(d){}});return b}();E.rules=[];J.setup()});rb=rb||function i(){var c=+new Date,a=Y(ea);if(!a)return rb=null;fa.trigger(nb);n.cost=(+new Date+n.cost-c)/2;return rb=setTimeout(i,ub(4,1E3/a-n.cost))}();return k(Z)}else if(typeof s=="string")if(f.length==1){r=p[s];j.trigger("recall",[s,r]);return r}else{if(r!==u){n.normal[s]&&(r=n.normal[s](r,p));if(p[s]===u)p[s]=
r;else if(p[s]!==r)j.trigger(s+"Change",[u,p[s]=r])}return j.trigger("store",[s,r])}},unreel:function(){return this.trigger("teardown")}},re:{image:/^(.*)\.(jpg|jpeg|png|gif)\??.*$/i,ua:[/(msie|opera|firefox|chrome|safari)[ \/:]([\d.]+)/i,/(webkit)\/([\d.]+)/i,/(mozilla)\/([\d.]+)/i],array:/ *, */,touchy_agent:/iphone|ipod|ipad|android|fennec|rim tablet/i,lazy_agent:/\(iphone|ipod|android|fennec|blackberry/i,frame_klass:/frame-\d+/,substitution:/(@([A-Z]))/g,sequence:/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\.\.([0-9]+))($|[|]([0-9]+)$)/},
cdn:"http://code.vostrel.net/",math:{envelope:function(f,j,p,s,r,g){return j+Fa(s,r,-f*g)/p},hatch:function(f,j,p,s,r,g){f=(f<s?r:0)+f%r;f=j+-f*g/p;return f-qb(f)},interpolate:function(f,j,p){return j+f*(p-j)},distance:function(f,j,p){var s=p/2;f=j-f;return f<-s?f+p:f>s?f-p:f}},preload:{fidelity:function(f,j,p){function s(c,a,J){function pa(H){for(;!(H>=1&&H<=P);)H+=H<1?+P:-P;return i[J+H]||(i[J+H]=!!T.push(H))}if(!c.length)return[];var T=[],oa=4*a,S=j.frame,P=c.length;a=true;for(var Aa=P/oa,v=0;v<
oa;v++)pa(S+L(v*Aa));for(;Aa>1;){v=0;oa=T.length;Aa/=2;for(a=!a;v<oa;v++)pa(T[v]+(a?1:-1)*L(Aa))}for(v=0;v<=P;v++)pa(v);for(v=0;v<T.length;v++)T[v]=c[T[v]-1];return T}var r=j.orbital,g=r?2:j.rows||1,Z=r?p(ra):p(N);p=(j.row-1)*Z;r=[].concat(f);var i=new Array(f.length+1);f=g<2?[]:r.slice(p,p+Z);return s(f,1,p).concat(s(r,g,0))},linear:function(f){return f}},substitute:function(f,j){return f.replace(n.re.substitution,function(p,s,r){return typeof n.substitutes[r]=="function"?n.substitutes[r](j):vc[r]?
j(vc[r]):s})},substitutes:{T:function(){return+new Date}},normal:{fraction:function(f,j){if(f===null)return f;return j[Ia].loops?f-qb(f):Fa(0,1,f)},tier:function(f){if(f===null)return f;return Fa(0,1,f)},row:function(f,j){if(f===null)return f;return L(Fa(1,j[Ia].rows,f))},frame:function(f,j){if(f===null)return f;var p=j[Ia];j=j[N]*(p.orbital?2:p.rows||1);f=L(p.loops?f%j||j:Fa(1,j,f));return f<0?f+j:f},images:function(f,j){var p=n.re.sequence.exec(f);return!p?f:n.sequence(p,j[Ia])}},sequence:function(f,
j){if(f.length<=1)return j.images;var p=[],s=j.orbital,r=f[1],g=f[2],Z=+f[4]||1,i=s?2:j.rows||1;j=s?j.footage:j.stitched?1:j.frames;i=+(f[5]||i*j)-Z;f=+f[7]||1;for(j=0;j<=i;){p.push(r.replace(g,zc(Z+j+Q,g.length,"0")));j+=f}return p},instances:k(),leader:Y,resize_gauge:300,cost:0},fa=k(U);U=navigator.userAgent;var Ba=n.re.ua[0].exec(U)||n.re.ua[1].exec(U)||n.re.ua[2].exec(U),Ub=+Ba[2].split(".").slice(0,2).join(".");Ba=Ba[1]=="MSIE";var Xc=!(Ba&&Ub<8),Bc=!(Ba&&Ub<9),rb,B="reel",zb=B+"-overlay",uc=
B+"-indicator",tc=B+"-preloader",oc=B+"-monitor",$b=B+"-annotation",lb=B+"-panning",Ob=B+"-loading",cc="frame-",qa=Math,L=qa.round,qb=qa.floor,la=qa.ceil,Ga=qa.min,ub=qa.max,I=qa.abs,Vc=parseInt,Ua=n.math.interpolate,Oa="annotations",ib="area",Pb="auto",ic="backup",O="backwards",cb="bit",hc="brake",$a="cache",dc=$a+"d",Hb="center",Nb="click",ca=Nb+"ed",db=ca+"_location",eb=ca+"_on",Fb=ca+"_tier",wa="cwish",ab="departure",La="destination",bb="distance",ra="footage",x="fraction",F="frame",fc="framelock",
N="frames",aa="height",gb="hi",Jb="hidden",Db="image",$="images",Ma="loading",da="opening",xa=da+"_ticks",fb="lo",Ia="options",Qa="playing",ba="preloaded",Ib="ratio",Na="reeling",Gb="reeled",Xa="responsive",Ka="revolution",Bb="revolution_y",R="row",ec="rowlock",Eb="rows",Ja="shy",Ya="spacing",ua="speed",gc="stage",W="stitched",Za=W+"_shift",Cb=W+"_travel",Sb="stopped",ya="style",ea="tempo",hb="ticks",ta="tier",ac="truescale",ma="velocity",va="vertical",M="width",G=y(B),ha=y("pan")+G,Mc="dragstart"+
G,Lc="mousedown"+G,Kc="mouseenter"+G,Tc="mouseleave"+ha,Sc="mousemove"+ha,Uc="mouseup"+ha,Jc="mousewheel"+G,nb="tick"+G,Rc="touchcancel"+ha,Qc="touchend"+ha,Fc="touchstart"+G,Pc="touchmove"+ha,Nc="deviceorientation"+G,kc="resize"+G,Q="",D=" ",na=",",mb="absolute",Kb="block",Da="@CDN@",sa="div",mc="hand",Qb="head",yb="html",ia="id",Ab="img",Vb="jquery."+B,kb="none",tb="object",wb="string",Ec=[M,aa,Ya,Ka,Bb,W,Za,Cb],vc={W:M,H:aa},pc=Xc?yc("CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7"):
Da+"blank.gif",Hc=Ea(Da+Vb+".cur")+na+"move",Gc=Ea(Da+Vb+"-drag.cur")+na+"move",Ic=Ea(Da+Vb+"-drag-down.cur")+na+"move",ja=n.touchy=n.re.touchy_agent.test(U);n.lazy=n.re.lazy_agent.test(U);var Oc=ja?u:Ba&&Ub<9?1:0,Yc=k.cleanData;k.cleanData=function(f){Yc(k(f).each(function(){k(this).triggerHandler("clean")}))};k.extend(k.fn,n.fn)&&k(n.scan);return n}}(jQuery,window,document)});
