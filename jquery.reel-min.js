/*
 Copyright (c) 2009-2013 Petr Vostrel (http://petr.vostrel.cz/)
 Licensed under the MIT License (LICENSE.txt).

 jQuery Reel
 http://reel360.org
 Version: 1.3-devel
 Updated: 2013-10-10

 Requires jQuery 1.5 or higher
*/
(function(k){var U=typeof define=="function"&&define.amd&&(define(["jquery"],k)||true),V=!U&&typeof module=="object"&&typeof module.exports=="object"&&(module.exports=k);!U&&!V&&k()})(function(){return jQuery.reel||function(k,U,V,t){function wc(f){return n.instances.push(f[0])&&f}function xc(f){return(n.instances=n.instances.not(Ca(f.attr(ja))))&&f}function Z(f){return n.instances.first().data(f)}function yc(f){return"data:image/gif;base64,R0lGODlh"+f}function W(f){return"<"+f+"/>"}function w(f){return"."+
(f||"")}function Va(f){return f.replace(Da,n.cdn)}function Ea(f){return"url('"+ub(f)+"')"}function Xb(f,j){return typeof j==vb?j[f]:j}function Fa(f,j,p){return wb(f,Ga(j,p))}function Ha(f,j){return H(f)*(j?-1:1)}function Wa(f){return ka?f.touch||f.originalEvent.touches[0]:f}function xb(f){return f.originalEvent}function y(f){return f===t?0:typeof f==yb?f:f+"px"}function Ca(f){return"#"+f}function zc(f,j,p){for(;f.length<j;)f=p+f;return f}function ub(f){return encodeURI(decodeURI(f))}function zb(f){return n.re.array.exec(f)?
f.split(n.re.array):f}function Yb(f){return!f.parents(Ab).length}function Zb(f){return typeof f==yb?f:k.each(f,function(j,p){f[j]=p?+p:t})}function Ac(f){try{console.error(f)}catch(j){}}if(!(!k||+k().jquery.replace(".",R).substr(0,2)<15)){var n=k.reel={version:"1.3rc",def:{frame:1,frames:36,loops:true,clickfree:false,draggable:true,scrollable:true,steppable:true,throwable:true,wheelable:true,orientable:false,cw:false,revolution:t,stitched:0,directional:false,row:1,rows:0,rowlock:false,framelock:false,
orbital:0,vertical:false,inversed:false,footage:6,spacing:0,horizontal:true,suffix:"-reel",image:t,images:"",path:"",preload:"fidelity",shy:false,speed:0,delay:0,timeout:2,duration:t,rebound:0.5,entry:t,opening:0,brake:0.23,velocity:0,tempo:36,laziness:6,cursor:t,hint:"",indicator:0,klass:"",preloader:2,area:t,attr:{},annotations:t,responsive:false,graph:t,monitor:t},scan:function(){return k(w(B)+":not("+w(Bb)+" >)").each(function(f,j){f=k(j);j=f.data();j.images=zb(j.images);var p={};k(w($b)+"[data-for="+
f.attr(ja)+"]").each(function(u,r){u=k(r);r=u.data();r.x=Zb(zb(r.x));r.y=Zb(zb(r.y));var g=u.attr(ja);r.node=u.removeData();p[g]=r});j.annotations=p;f.removeData().reel(j)})},fn:{reel:function(){var f=arguments,j=k(this),p=j.data(),u=f[0]||{},r=f[1];if(typeof u=="object"){var g=k.extend({},n.def,u),N=[];j.filter(Xa).unreel().filter(function(){var i=k(this),d=g.attr,a=d.src||i.attr("src"),I=d.width||i.width();i=d.height||i.height();if(a&&I&&i)return true;else Ac("Missing attributes: Image needs `src` and both dimensions to be set to Reel")}).each(function(){var i=
k(this),d=function(b,e){return i.reel(b,e)&&i.data(b)},a=function(b){return i.reel(b)},I={setup:function(){if(!(i.hasClass(B)&&i.parent().hasClass(Bb))){d(Ia,g);var b=i.attr(g.attr).attr("src"),e=d(ja,i.attr(ja)||i.attr(ja,B+"-"+ +new Date).attr(ja)),c=k.extend({},i.data()),h=d($,g.images||[]),o=d(X,g.stitched),m=!h.length||o;m=d(Ya,g.responsive&&(Bc?true:!m));var l=d(ac,{}),q=g.loops,x=g.orbital,s=g.revolution,z=g.rows,E=d(ra,Ga(g.footage,g.frames));d(Za,g.spacing);var K=d(J,i.width()),la=d(aa,i.height()),
Cc=d(Ja,g.shy),bc=d(O,x&&E||z<=1&&h.length||g.frames),Dc=z>1||x;d(Ka,Xb("x",s)||o/2||K*2);d(Cb,!Dc?0:Xb("y",s)||(z>3?la:la/(5-z)));z=o?1:ma(bc/E);d(Db,o-(q?0:K));d($a,0);e=Ca(e+g.suffix);s=i[0].className||R;E=k(W(sa),{id:e.substr(1),"class":s+D+Bb+D+cc+"0"});d(ab,k(W(sa),{"class":Eb}).appendTo("body"));E=i.wrap(E.addClass(g.klass)).attr({"class":B});N.push(wc(E)[0]);E=E.parent().bind(I.instance);d(Fb,h.length?R:g.image||b.replace(n.re.image,"$1"+g.suffix+".$2"));d(dc,[]);d(L,null);d(A,null);d(Y,null);
d(ta,null);d(Gb,z);d(ec,g.rowlock);d(fc,g.framelock);d(bb,d(La,d(cb,0)));d(db,1/(bc-(q&&!o?0:1)));d(gc,e);d(P,d(ua,g.speed)<0);d(Ma,false);d(na,0);d(va,g.vertical);d(ba,0);d(wa,Ha(1,!g.cw&&!o));d(eb,{});d(ca,false);d(fb,d(Hb,0));d(gb,d(hb,0));d(Na,false);d(Ib,false);d(da,false);d(hc,g.brake);d(Jb,!!x);d(ea,g.tempo/(n.lazy?g.laziness:1));d(xa,-1);d(ib,-1);d(Oa,g.annotations||E.unbind(w(Oa))&&{});d(Kb,1);d(ic,{src:b,classes:s,data:c,style:i.attr(ya)||R});g.steppable||E.unbind("up.steppable");g.indicator||
E.unbind(".indicator");C(R,{overflow:Lb,position:"relative"});m||C(R,{width:K,height:la});m&&k.each(Ec,function(Zc,jc){l[jc]=a(jc)});C(oa+D+w(B),{display:Mb});C(w(Eb),{position:"fixed",left:y(-100),top:y(-100)},true);C(w(Eb)+D+Xa,{position:Pa,width:10,height:10},true);fa.bind(I.pool);i.trigger(Cc?"prepare":"setup")}},instance:{teardown:function(){var b=i.data(ic);i.parent().unbind(I.instance);if(a(Ja))i.unbind(jb,ga);else a(ya).remove()&&a(kb).unbind(F);a(ab).empty();clearTimeout(Nb);clearTimeout(Ob);
k(U).unbind(kc,lc);xc(i.unbind(F).removeData().siblings().unbind(F).remove().end().attr({"class":b.classes,src:b.src,style:b.style}).data(b.data).unwrap());lb();fa.unbind(I.pool);ha.unbind(ia);k(U).unbind(F)},setup:function(){function b(q){return i.trigger("down",[Wa(q).clientX,Wa(q).clientY,q])&&q.give}function e(q,x){return!x||i.trigger("wheel",[x,q])&&q.give}var c=i.parent().append(za()),h=d(kb,k(g.area||c)),o=g.rows>1;C(D+w(B),{MozUserSelect:mb,WebkitUserSelect:mb,MozTransform:"translateZ(0)"});
i.unbind(jb,ga);if(ka)h.bind(Fc,b);else{var m=g.cursor,l=m==mc?Gc:m||Hc;m=m==mc?Ic+D+"!important":t;C(R,{cursor:Va(l)});C(w(Pb),{cursor:"wait"});C(w(nb)+oa+w(nb)+" *",{cursor:Va(m||l)},true);h.bind(g.wheelable?Jc:null,e).bind(g.clickfree?Kc:Lc,b).bind(Mc,function(){return false})}if(a(Ya)){C(D+w(B),{width:"100%",height:Qb});k(U).bind(kc,lc)}g.hint&&h.attr("title",g.hint);g.indicator&&c.append(Qa("x"));o&&g.indicator&&c.append(Qa("y"));g.monitor&&c.append(nc=k(W(sa),{"class":oc}))&&C(D+w(oc),{position:Pa,
left:0,top:0})},preload:function(){function b(x,s){setTimeout(function(){!Yb(e)&&s.attr({src:ub(x)})},(l-m.length)*2)}var e=i.parent(),c=a($),h=!c.length,o=n.preload[g.preload]||n.preload[n.def.preload],m=h?[a(Fb)]:o(c.slice(0),g,a),l=m.length;d(ba,h?0.5:0);c=a(ab).empty();h=[];e.addClass(Pb);d(ya,a(ya)||k("<"+ya+' type="text/css">'+C.rules.join("\n")+"</"+ya+">").prependTo(Rb));d(Ma,true);i.trigger("stop");g.responsive&&Sb();for(i.trigger("resize",true);m.length;){o=n.substitute(g.path+m.shift(),
a);var q=k(W(Xa)).appendTo(c);q.bind("load error abort",function(x){x.type!="load"&&i.trigger(x.type);return!Yb(e)&&i.trigger("preloaded")&&false});b(o,q);h.push(o)}d(dc,h);d(Ja,false)},preloaded:function(){var b=a($).length||1,e=d(ba,Ga(a(ba)+1,b));if(e===b){i.parent().removeClass(Pb);i.trigger("loaded")}e===1&&i.trigger("frameChange",[t,a(L)])},loaded:function(){a($).length>1||i.css({backgroundImage:Ea(n.substitute(g.path+a(Fb),a))}).attr({src:Va(pc)});a(X)&&i.attr({src:Va(pc)});a(Ib)||d(na,g.velocity||
0);d(Ma,false);pa=true},prepare:function(){i.css("display",Mb).one(jb,ga)},opening:function(){if(!g.opening)return i.trigger("openingDone");d(da,true);d(Tb,!a(ua));var b=g.entry||g.speed,e=a(A),c=g.opening;d(A,e-b*c);d(xa,ma(c*Z(ea)))},openingDone:function(){function b(c){return i.trigger("orient",[xb(c).alpha,xb(c).beta,xb(c).gamma,c])&&c.give}d(Ra,false);d(da,false);var e=ob+w(da);fa.unbind(e,I.pool[e]);ka&&g.orientable&&k(U).bind(Nc,b);if(g.delay>0)Nb=setTimeout(function(){i.trigger("play")},g.delay*
1E3);else i.trigger("play")},play:function(b,e){e=e?d(ua,e):a(ua)*Ha(1,a(P));(b=g.duration)&&d(ib,ma(b*Z(ea)));d(P,e<0);e=d(Ra,!!e);d(Tb,!e);Aa()},reach:function(b,e,c){if(e!=a(L)){b=a(O);d(Y,ma(e/b));var h=d(bb,a(L));e=d(La,e);e=d(cb,n.math.distance(h,e,b));c=H(c||a(ua))*Ha(1,e<0);i.trigger("play",c)}},pause:function(){v()},stop:function(){var b=d(Tb,true);d(Ra,!b)},down:function(b,e,c,h){function o(l){return i.trigger("pan",[Wa(l).clientX,Wa(l).clientY,l])&&l.give}function m(l){return i.trigger("up",
[l])&&l.give}if(!(h&&h.button!=Oc&&!g.clickfree))if(g.draggable){d(ca,a(L));b=g.clickfree;d(na,0);pb=qb(a(Ka),e,c);ka||h&&h.preventDefault();v();lb();G=0;k(Ab,ha).addClass(nb);ka?ha.bind(Pc,o).bind(Qc+D+Rc,m):(b?a(kb):ha).bind(Sc,o).bind(b?Tc:Uc,m)}},up:function(){d(ca,false);d(Na,false);var b=g.throwable,e=H(Sa[0]+Sa[1])/60;Q=d(na,!b?0:b===true?e:Ga(b,e))?1:0;v();lb();k(Ab,ha).removeClass(nb);(g.clickfree?a(kb):ha).unbind(ia)},pan:function(b,e,c,h){if(g.draggable&&Ta){Ta=false;v();b=g.rows;var o=
g.orbital,m=ka&&!a(Na)&&b<=1&&!o&&g.scrollable,l={x:e-pb.x,y:c-pb.y},q={x:H(l.x),y:H(l.y)};if(h&&m&&q.x<q.y)return h.give=true;if(q.x>0||q.y>0){h&&(h.give=false);G=wb(q.x,q.y);pb={x:e,y:c};h=a(Ka);m=a(eb);q=a(va);if(!a(fc)){var x=d(A,qc(q?c-m.y:e-m.x,a(fb),h,a(gb),a(hb),a(wa),q?c-m.y:e-m.x));d(Na,a(Na)||a(L)!=a(ca));(l=rc(q?l.y:l.x||0))&&d(P,l<0)}if(o&&a(Jb)){d(va,H(c-m.y)>H(e-m.x));m=qb(h,e,c)}if(b>1&&!a(ec)){b=a(Cb);o=a(Hb);l=-o*b;d(ta,n.math.envelope(c-m.y,o,b,l,l+b,-1))}!(x%1)&&!g.loops&&qb(h,
e,c)}}},wheel:function(b,e,c){if(e){rb=true;b=ma(qa.sqrt(H(e))/2);b=Ha(b,e>0);e=0.0833*a(Ka);qb(e);b&&d(P,b<0);d(na,0);d(A,qc(b,a(fb),e,a(gb),a(hb),a(wa)));c&&c.preventDefault();c&&(c.give=false);v();i.trigger("up",[c])}},orient:function(b,e){if(!(!Ta||S)){sc=true;b=e/360;fraction=d(A,+(g.stitched||g.cw?1-b:b).toFixed(2));Ta=false}},fractionChange:function(b,e,c){if(e===t){b=1+sb(c/a(db));e=g.rows>1;c=g.orbital;d(Jb,!!c&&(b<=c||b>=a(ra)-c+2));if(e)b+=(a(Y)-1)*a(O);d(L,b)}},tierChange:function(b,e,
c){if(e===t){b=d(Y,M(Ua(c,1,g.rows)));e=a(O);c=a(L)%e||e;d(L,c+b*e-e)}},rowChange:function(b,e,c){e===t&&d(ta,1/(g.rows-1)*(c-1))},frameChange:function(b,e,c){if(e===t){this.className=this.className.replace(n.re.frame_klass,cc+c);var h=a(O);e=g.rows;b=g.path;var o=c%h||h,m=!!a(ba),l=((c-o)/h+1-1)/(e-1),q=M(Ua(l,1,e)),x=a(Y);m&&q===x?a(ta):d(ta,l);o=Ga((o-1)/(h-1),0.9999);l=x*h-h;h=M(Ua(o,l+1,l+h));l=H((a(A)||0)-o)<1/(a(O)-1);m&&h===c&&l?a(A):d(A,o);var s=a(ra);if(g.orbital&&a(va)){c=g.inversed?s+
1-c:c;c+=s}l=g.horizontal;var z=a(X);h=a($);var E=!h.length||z;q=a(Za);var K=a(J),la=a(aa);if(E){if(z){c=d($a,M(Ua(o,0,a(Db)))%z);e=e<=1?0:(la+q)*(e-x);c=[y(-c),y(-e)];e=h.length>1&&h[x-1];b=n.substitute(b+e,a);e&&i.css("backgroundImage").search(b)<0&&i.css({backgroundImage:Ea(b)})}else{b=c%s-1;b=b<0?s-1:b;c=sb((c-0.1)/s);c+=e>1?0:a(P)?0:!g.directional?0:a(Gb);c=c*((l?la:K)+q);b=b*((l?K:la)+q);c=h.length?[0,0]:l?[y(-b),y(-c)]:[y(-c),y(-b)]}i.css({backgroundPosition:c.join(D)})}else{c=h[c-1];a(Ya)&&
Sb();m&&i.attr({src:ub(n.substitute(b+c,a))})}}},"frameChange.reach":function(b,e,c){if(!(!a(La)||e!==t)){b=n.math.distance(a(bb),c,a(O));if(H(b)>=H(a(cb))){d(L,d(La));d(La,d(cb,d(bb,0)));i.trigger("stop")}}},"imageChange imagesChange":function(){i.trigger("preload")},"fractionChange.indicator":function(b,e,c){if(g.indicator&&e===t){b=g.indicator;var h=g.orbital;e=h&&a(va)?a(aa):a(J);h=h?a(ra):g.images.length||a(O);h=ma(e/h);e-=h;c=M(Ua(c,0,e));c=!g.cw||a(X)?c:e-c;Qa.$x.css(a(va)?{left:0,top:y(c),
bottom:Qb,width:b,height:h}:{bottom:0,left:y(c),top:Qb,width:h,height:b})}},"tierChange.indicator":function(b,e,c){if(g.rows>1&&g.indicator&&e===t){var h=a(aa);b=g.indicator;e=ma(h/g.rows);h-=e;c=M(c*h);Qa.$y.css({left:0,top:c,width:b,height:e})}},"setup.annotations":function(){var b=i.parent();k.each(a(Oa),function(e,c){var h=typeof c.node==yb?k(c.node):c.node||{};h=h.jquery?h:k(W(sa),h);h=h.attr({id:e}).addClass($b);var o=c.image?k(W(Xa),c.image):k(),m=c.link?k(W("a"),c.link).click(function(){i.trigger("up.annotations",
{target:m})}):k();C(Ca(e),{display:mb,position:Pa},true);c.image||c.link&&h.append(m);c.link||c.image&&h.append(o);c.link&&c.image&&h.append(m.append(o));h.appendTo(b)})},"prepare.annotations":function(){k.each(a(Oa),function(b){k(Ca(b)).hide()})},"frameChange.annotations":function(b,e){if(!(!a(ba)||e!==t)){var c=a(J),h=a(X),o=a($a);k.each(a(Oa),function(m,l){m=k(Ca(m));var q=l.start||1,x=l.end,s=s||a(L),z=s-1,E=l.at?l.at[z]=="+":false;z=l.at?z:z-q+1;s=typeof l.x!=vb?l.x:l.x[z];var K=typeof l.y!=
vb?l.y:l.y[z];l=s!==t&&K!==t&&(l.at?E:z>=0&&(!x||z<=x-q));if(h){q=s>h-c&&o>=0&&o<c;s=!(s<c&&o>h-c)?s:s+h;s=!q?s:s-h;s-=o}if(a(Ya)){q=a(Kb);s=s&&s*q;K=K&&K*q}s={display:l?Mb:mb,left:y(s),top:y(K)};m.css(s)})}},"up.annotations":function(b,e){if(!(G>10||rb)){b=k(e.target);(b.is("a")?b:b.parents("a")).attr("href")&&(G=10)}},"up.steppable":function(){G||rb||i.trigger(a(eb).x-i.offset().left>0.5*a(J)?"stepRight":"stepLeft")},"stepLeft stepRight":function(){v()},stepLeft:function(){d(P,false);d(A,a(A)-a(db)*
a(wa))},stepRight:function(){d(P,true);d(A,a(A)+a(db)*a(wa))},stepUp:function(){d(Y,a(Y)-1)},stepDown:function(){d(Y,a(Y)+1)},resize:function(b,e){if(!(a(Ma)&&!e)){var c=a(X),h=a(Za);b=a(aa);var o=!a($).length||c,m=g.rows||1;c=a($).length?!c?t:y(c)+D+y(b):c&&y(c)+D+y((b+h)*m-h)||y((a(J)+h)*a(ra)-h)+D+y((b+h)*a(Gb)*m*(g.directional?2:1)-h);i.css({height:o?y(b):null,backgroundSize:c});e||i.trigger("imagesChange")}},"setup.fu":function(){d(L,g.frame+(g.row-1)*a(O));i.trigger("preload")},"wheel.fu":function(){rb=
false},"clean.fu":function(){i.trigger("teardown")},"loaded.fu":function(){i.trigger("opening")}},pool:{"tick.reel.preload":function(){if(!(!(pa||a(Ma))||a(Ja))){var b=a(J),e=Vc(za.$.css(J)),c=a($).length||1,h=M(1/c*a(ba)*b);za.$.css({width:e+(h-e)/3+1});if(a(ba)===c&&e>b-1){pa=false;za.$.fadeOut(300,function(){za.$.css({opacity:1,width:0})})}}},"tick.reel":function(b){if(!a(Ja)){var e=a(na),c=Z(ea),h=g.monitor;if(!(!n.intense&&Wc())){if(Q){e=e-a(hc)/c*Q;e=d(na,e>0.1?e:(Q=S=0))}h&&nc.text(a(h));e&&
Q++;S&&S++;rc(0);Ta=true;if(S&&!e)return T(b);if(a(ca))return T(b,v());if(!(a(xa)>0)){if(!g.loops&&g.rebound){!S&&!(a(A)%1)?Ub++:(Ub=0);Ub>=g.rebound*1E3/c&&d(P,!a(P))}b=a(wa)*Ha(1,a(P));c=a(ib);e=(!a(Ra)||sc||!c?e:H(a(ua))+e)/Z(ea);d(A,a(A)-e*b);c=!g.duration?c:c>0&&d(ib,c-1);!c&&a(Ra)&&i.trigger("stop")}}}},"tick.reel.opening":function(){if(a(da)){var b=(g.entry||g.speed)/Z(ea)*(g.cw?-1:1),e=d(xa,a(xa)-1);d(A,a(A)+b);e||i.trigger("openingDone")}}}},pa=false,T=function(b,e){return b.stopImmediatePropagation()||
e},ga=function(){i.trigger("setup")},S,Q=0,Aa=function(){return S=0},v=function(){clearTimeout(Nb);fa.unbind(ob+w(da),I.pool[ob+w(da)]);d(xa,0);d(Ib,true);return S=-g.timeout*Z(ea)},G=0,rb=false,sc=false,nc=k(),za=function(){C(D+w(tc),{position:Pa,left:0,bottom:0,height:g.preloader,overflow:Lb,backgroundColor:"#000"});return za.$=k(W(sa),{"class":tc})},Qa=function(b){C(D+w(uc)+w(b),{position:Pa,width:0,height:0,overflow:Lb,backgroundColor:"#000"});return Qa["$"+b]=k(W(sa),{"class":uc+D+b})},C=function(b,
e,c){function h(o){var m=[];k.each(o,function(l,q){m.push(l.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+y(q)+";")});return"{"+m.join(R)+"}"}c=c?R:a(gc);b=b.replace(/^/,c).replace(oa,oa+c);return C.rules.push(b+h(e))&&e},Wc=function(){var b=a(aa),e=a(J),c=i[0].getBoundingClientRect();return c.top<-b||c.left<-e||c.right>e+k(U).width()||c.bottom>b+k(U).height()},Ub=0,pb={x:0,y:0},rc=function(b){return Sa.push(b)&&Sa.shift()&&b},lb=function(){return Sa=[0,0]},Sa=lb(),qc=g.graph||n.math[g.loops?"hatch":
"envelope"],lc=function(){clearTimeout(Ob);Ob=setTimeout(Sb,n.resize_gauge)},Sb=function(){if(i.width()!=a(J)){var b=a(ac),e=d(Kb,i.width()/b.width);k.each(b,function(c,h){d(c,M(h*e))});i.trigger("resize")}},Nb,Ob,qb=function(b,e,c){var h=d(fb,a(A));d(Hb,a(ta));var o=g.loops;d(gb,o?0:-h*b);d(hb,o?b:b-h*b);return e!==t&&d(eb,{x:e,y:c})||t},Ta=true,ha=fa;try{if(fa[0]!=top.document)ha=fa.add(top.document)}catch($c){}top===self?k():function(b){k("iframe",ha.last()).each(function(){try{if(k(this).contents().find(Rb).html()==
k(Rb).html())return(b=k(this))&&false}catch(e){}});return b}();C.rules=[];I.setup()});tb=tb||function i(){var d=+new Date,a=Z(ea);if(!a)return tb=null;fa.trigger(ob);n.cost=(+new Date+n.cost-d)/2;return tb=setTimeout(i,wb(4,1E3/a-n.cost))}();return k(N)}else if(typeof u=="string")if(f.length==1)return p[u];else{if(r!==t){n.normal[u]&&(r=n.normal[u](r,p));if(p[u]===t)p[u]=r;else if(p[u]!==r)j.trigger(u+"Change",[t,p[u]=r])}return j}},unreel:function(){return this.trigger("teardown")}},re:{image:/^(.*)\.(jpg|jpeg|png|gif)\??.*$/i,
ua:[/(msie|opera|firefox|chrome|safari)[ \/:]([\d.]+)/i,/(webkit)\/([\d.]+)/i,/(mozilla)\/([\d.]+)/i],array:/ *, */,touchy_agent:/iphone|ipod|ipad|android|fennec|rim tablet/i,lazy_agent:/\(iphone|ipod|android|fennec|blackberry/i,frame_klass:/frame-\d+/,substitution:/(@([A-Z]))/g,sequence:/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\.\.([0-9]+))($|[|]([0-9]+)$)/},cdn:"http://code.vostrel.net/",math:{envelope:function(f,j,p,u,r,g){return j+Fa(u,r,-f*g)/p},hatch:function(f,j,p,u,r,g){f=(f<u?r:0)+f%r;f=j+-f*
g/p;return f-sb(f)},interpolate:function(f,j,p){return j+f*(p-j)},distance:function(f,j,p){var u=p/2;f=j-f;return f<-u?f+p:f>u?f-p:f}},preload:{fidelity:function(f,j,p){function u(d,a,I){function pa(G){for(;!(G>=1&&G<=Q);)G+=G<1?+Q:-Q;return i[I+G]||(i[I+G]=!!T.push(G))}if(!d.length)return[];var T=[],ga=4*a,S=j.frame,Q=d.length;a=true;for(var Aa=Q/ga,v=0;v<ga;v++)pa(S+M(v*Aa));for(;Aa>1;){v=0;ga=T.length;Aa/=2;for(a=!a;v<ga;v++)pa(T[v]+(a?1:-1)*M(Aa))}for(v=0;v<=Q;v++)pa(v);for(v=0;v<T.length;v++)T[v]=
d[T[v]-1];return T}var r=j.orbital,g=r?2:j.rows||1,N=r?p(ra):p(O);p=(j.row-1)*N;r=[].concat(f);var i=new Array(f.length+1);f=g<2?[]:r.slice(p,p+N);return u(f,1,p).concat(u(r,g,0))},linear:function(f){return f}},substitute:function(f,j){return f.replace(n.re.substitution,function(p,u,r){return typeof n.substitutes[r]=="function"?n.substitutes[r](j):vc[r]?j(vc[r]):u})},substitutes:{T:function(){return+new Date}},normal:{fraction:function(f,j){if(f===null)return f;return j[Ia].loops?f-sb(f):Fa(0,1,f)},
tier:function(f){if(f===null)return f;return Fa(0,1,f)},row:function(f,j){if(f===null)return f;return M(Fa(1,j[Ia].rows,f))},frame:function(f,j){if(f===null)return f;var p=j[Ia];j=j[O]*(p.orbital?2:p.rows||1);f=M(p.loops?f%j||j:Fa(1,j,f));return f<0?f+j:f},images:function(f,j){var p=n.re.sequence.exec(f);return!p?f:n.sequence(p,j[Ia])}},sequence:function(f,j){if(f.length<=1)return j.images;var p=[],u=j.orbital,r=f[1],g=f[2],N=f[4];N=N!==t?+N:1;var i=u?2:j.rows||1;j=u?j.footage:j.stitched?1:j.frames;
i=+(f[5]||i*j)-N;f=+f[7]||1;for(j=0;j<=i;){p.push(r.replace(g,zc(N+j+R,g.length,"0")));j+=f}return p},instances:k(),leader:Z,resize_gauge:300,cost:0},fa=k(V);V=navigator.userAgent;var Ba=n.re.ua[0].exec(V)||n.re.ua[1].exec(V)||n.re.ua[2].exec(V),Vb=+Ba[2].split(".").slice(0,2).join(".");Ba=Ba[1]=="MSIE";var Xc=!(Ba&&Vb<8),Bc=!(Ba&&Vb<9),tb,B="reel",Bb=B+"-overlay",Eb=B+"-cache",uc=B+"-indicator",tc=B+"-preloader",oc=B+"-monitor",$b=B+"-annotation",nb=B+"-panning",Pb=B+"-loading",cc="frame-",qa=Math,
M=qa.round,sb=qa.floor,ma=qa.ceil,Ga=qa.min,wb=qa.max,H=qa.abs,Vc=parseInt,Ua=n.math.interpolate,Oa="annotations",kb="area",Qb="auto",ic="backup",P="backwards",db="bit",hc="brake",ab="cache",dc=ab+"d",Jb="center",jb="click",ca=jb+"ed",eb=ca+"_location",fb=ca+"_on",Hb=ca+"_tier",wa="cwish",bb="departure",La="destination",cb="distance",ra="footage",A="fraction",L="frame",fc="framelock",O="frames",aa="height",hb="hi",Lb="hidden",Fb="image",$="images",Ma="loading",da="opening",xa=da+"_ticks",gb="lo",
Ia="options",Ra="playing",ba="preloaded",Kb="ratio",Na="reeling",Ib="reeled",Ya="responsive",Ka="revolution",Cb="revolution_y",Y="row",ec="rowlock",Gb="rows",Ja="shy",Za="spacing",ua="speed",gc="stage",X="stitched",$a=X+"_shift",Db=X+"_travel",Tb="stopped",ya="style",ea="tempo",ib="ticks",ta="tier",ac="truescale",na="velocity",va="vertical",J="width",F=w(B),ia=w("pan")+F,Mc="dragstart"+F,Lc="mousedown"+F,Kc="mouseenter"+F,Tc="mouseleave"+ia,Sc="mousemove"+ia,Uc="mouseup"+ia,Jc="mousewheel"+F,ob="tick"+
F,Rc="touchcancel"+ia,Qc="touchend"+ia,Fc="touchstart"+F,Pc="touchmove"+ia,Nc="deviceorientation"+F,kc="resize"+F,R="",D=" ",oa=",",Pa="absolute",Mb="block",Da="@CDN@",sa="div",mc="hand",Rb="head",Ab="html",ja="id",Xa="img",Wb="jquery."+B,mb="none",vb="object",yb="string",Ec=[J,aa,Za,Ka,Cb,X,$a,Db],vc={W:J,H:aa},pc=Xc?yc("CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7"):Da+"blank.gif",Hc=Ea(Da+Wb+".cur")+oa+"move",Gc=Ea(Da+Wb+"-drag.cur")+oa+"move",Ic=Ea(Da+Wb+"-drag-down.cur")+oa+"move",
ka=n.touchy=n.re.touchy_agent.test(V);n.lazy=n.re.lazy_agent.test(V);var Oc=ka?t:Ba&&Vb<9?1:0,Yc=k.cleanData;k.cleanData=function(f){Yc(k(f).each(function(){k(this).triggerHandler("clean")}))};k.extend(k.fn,n.fn)&&k(n.scan);return n}}(jQuery,window,document)});
